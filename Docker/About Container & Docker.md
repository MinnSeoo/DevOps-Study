## **컨테이너란 ?**

컨테이너는 클라우드 가상화 기술로 주로 docker나 Kubernetes에 사용된다.

그럼 이 컨테이너 기술은 도대체 어떤 역할을 하는 녀석일까?

컨테이너란 논리적인 공간을 만들고, 어플리케이션을 작동시키기 위해 필요한 라이브러리나 어플리케이션 등을 하나로 모아, 마치 별도의 서버인 것처럼 사용할 수 있게 만드는 기술이다.

### **사용하는 이유**

우리가 개발을 하기 위해 하나의 환경을 구축하기 위해선 상당한 수고가 들어가게된다.

음.. 예를 들면 서버가 있어야 하고, OS를 구축해야 하고, 개발을 위한 네트워크 통신 포트 구성과 개발 툴들 설치…등 많은 과정들을 거쳐야 한다. 또한 호환성을 생각해서 툴의 버전과 OS 버전..등을 일일히 맞춰서 설정해 줘야한다. 

이러한 과정들을 1번만 해도 복잡하고 귀찮은데, 프로젝트 개발에 참여하게된 모든 개발자의 PC 별로 일일히 설치 한다고 생각하면.. 정말 끔찍 할것 같다.

그래서 많은 사람들은 컨테이너라는 기술을 사용한다. 컨테이너를 사용하여 환경을 구축한 뒤, 다른 서버로 배포하면 위와 같은 번거로운 부분을 최소화 할 수 있으며, 특히 컨테이너는 배포에 최적화 되어있고 **호스트의 OS**가 달라도 어디서든 구동 시킬 수 있다는 **장점**이 있다.

또한 컨테이너는 경량화에 초점을 두고 있어 최소 메모리만 사용하도록 구성되어 있다.

- **호스트의 OS - 물리적 하드웨어 위에 OS를 설치해, 그 위에 가상VM이나 가상 소프트웨어를 움직이는 방식.**

### 장단점

**[ 장점 ]**

- 배포에 최적화 되어있다.
- 실행 속도가 빠르다
- 자원 낭비가 적다. (여기서 말하는 자원은 컴퓨터 자원 → 메모리, CPU.. 등을 말한다.)

**[ 단점 ]**

- 보안이슈
    
    → 컨테이너는 커널을 공유한다. 그렇기에 한 개의 컨테이너가 뚫리게 되면 다른 컨테이너들에게도 영향을 미치게 된다. 그리고 컨테이너는 논리적으로 격리한 개념이다 보니 물리적으로 격리한 VM에 비해 보안이 취약하다. 
    

## **Docker란?**

도커는 리눅스 컨테이너에 리눅스 어플리케이션을 프로세스 격리 기술을 사용하여 더 쉽게 컨테이너로 실행하고 관리할 수 있게 해 주는 오픈 소스 프로젝트이다. 일반적으로 **도커 엔진** 혹은 도커에 관련된 모든 프로젝트를 말한다.

**도커 엔진**은 컨테이너를 생성하고 관리하는 주체로서 이 자체로도 컨테이너를 제어할 수 있으며 다양한 기능을 제공하는 도커의 프로젝트이다. 

(**도커 엔진**은 도커의 **핵심**이라고 볼 수 있을 정도로 중요하다.)

### VM 과 Docker의 차이

**[ VM ]**

VM은 **하이퍼바이저**를 이용해 여러개의 운영체제를 하나의 호스트에서 생성해 사용한다.

여러 개의 운영체제는 가상 머신이라는 단위로 구별되고 각 가상머신에는 Ubuntu, CentOS 등의 운영 체제가 설치되어 사용된다. 그리고 하이퍼바이저에 의해 생성 및 관리되는 OS를 Guest OS라고 하며, 각각의 Guest OS는 완전히 독립된 공간과 시스템 자원을 할당받아 사용한다.  → EX) VirtualBox, VMware

그러나, 위와 같이 독립된 공간을 생성하고 각종 시스템 자원들을 가상화 하는 작업은 반드시 하이퍼바이저를 거치기 때문에 일반 호스트에 비해 성능 손실이 발생한다. 

또한 VM은 게스트 운영체제를 사용하기 위한 라이브러리, 커널 등을 전부 포함하기 때문에 배포 이미지를 생성시 이미지의 크기가 커진다.

- **하이퍼바이저** - 가상화 기술을 사용하여 하나의 물리적 컴퓨터에서 여러 개의 가상 머신 (VM)을 생성하고 관리하는 소프트웨어 계층을 뜻함.

**[ Docker ]**

도커 컨테이너는 가상화된 공간을 생성하기 위해 리눅스 자체 기능인 chroot, Cgroup, Namespace를 사용한다. 이를 통해 프로세스 단위로 격리 환경을 구축하기 때문에 성능 손실이 거의 없다.

그리고 컨테이너에 필요한 커널으 공유해서 사용하고, 컨테이너 안에는 어플리케이션을 구동하는 데 필요한 라이브러리 및 실행 파일만 존재하기 때문에 컨테이너를 이미지로 만들었을때 이미지 용량이 VM에 비해 현저히 적다.

따라서 컨테이너를 이미지로 만들어 배포하는 시간이 VM에 비해 빠르며, 성능 손실도 거의 없다.

### **Docker의 구성요소**

<img width="792" alt="image" src="https://github.com/MinnSeoo/DevOps-Study/assets/102645965/2274ae82-cea3-4eec-8751-ffc43aa27df9">


`Docker Client` - 도커를 설치하면 그것이 Client며 build, pull, run 등의 도커 명령어를 수행한다.

`DOCKER_HOST` - 도커가 띄워저 있는 서버를 의미. 도커 호스트에서 컨테이너 및 이미지를 관리한다.

`Docker daemon` - 도커의 엔진이다.

`Registry`  - 외부 이미지 저장소이다. 다른 사람들이 공유한 이미지를 내부 도커 호스트에 pull 할 수 있다.

              → 이렇게  외부에서 내부로 가지고 온 이미지를 run하면 컨테이너가 된다.

### Docker IMG & Container

도커 엔진에서 사용하는 기본 단위는 이미지와 컨테이너 이며 이 둘은 `1 : N`  관계이다.

<img width="814" alt="image" src="https://github.com/MinnSeoo/DevOps-Study/assets/102645965/5aec9706-5b2d-4df4-ba62-46007bda174c">

`Docker File -> Docker Image` - 도커 파일은 도커 이미지르 만들때 사용되는 파일이고 docker build 명령어를 실행시키면 도커 이미지를 만들 수 있다.

`Docker Image → Docker Container` - 도커 이미지를 docker run 명령어를 실행시키면 도커 컨테이너를 생성할 수 있다.

**[ Docker IMG ]**

도커 이미지는 컨테이너를 생성하기 위해 필요하며, 컨테이너를 생성후 실행할 때 읽기 전용으로 사용되며 여러 계층으로 된 바이너리 파일로 존재한다.

도커에서 사용되는 이미지 이름은 기본적으로 아래의 형태로 구성된다.

`[저장소 이름]/[이미지 이름]:[태그]` 

- 저장소 이름 : img가 저장된 장소.
- 이미지 이름 : 해당 img가 어떤 역할을 하는지 나타내며 필수로 설정 해야함. → ex) ubuntu:latest
- 태그 : img의 버전을 나타냄. → 명시하지 않으면 default로 latest로 지정됨.